<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	<title>Profile - Collaborator</title>

	<link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png">
    <link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png">
    <link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png" media="(prefers-color-scheme: dark)">
    <link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png">
    <link rel="icon" type="image/png" sizes="171x74" href="assets/img/icon.png">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap">

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


	<!-- Core styles (easy to swap: replace with your CDN or local copy) -->
	<link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
	<link rel="stylesheet" href="assets/css/styles.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/css/theme.bootstrap_4.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css">

	<!-- Small inline helpers to make quick edits easy (safe to remove) -->
	<style>
		/* helpful editing helpers: highlight editable form sections when .editing is added */
		.editable-section {
			outline: none;
		}

		.editable-section.editing {
			box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.12);
		}

		/* small utility to keep header actions grouped */
		.header-actions {
			display: flex;
			gap: .5rem;
			align-items: center;
		}

		/* Tool cards for quick management actions */
		.tool-card {
			display: flex;
			align-items: center;
			gap: 1rem;
			padding: .75rem;
			border-radius: .5rem;
			background: #f8f9fa;
			border: 1px solid rgba(0, 0, 0, 0.04);
		}

		.tool-card .icon {
			width: 44px;
			height: 44px;
			display: inline-flex;
			align-items: center;
			justify-content: center;
			border-radius: .5rem;
			background: rgba(0, 0, 0, 0.05);
			font-size: 18px;
		}

		.collab-table td,
		.collab-table th {
			vertical-align: middle;
		}
	</style>
</head>

<body id="page-top">
	<div id="wrapper">
		<div class="d-flex flex-column" id="content-wrapper">
			<div id="content">
				<nav class="navbar navbar-expand bg-white shadow mb-4 topbar">
					<div class="container-fluid">
						<button class="btn btn-link d-md-none me-3 rounded-circle" id="sidebarToggleTop" type="button">
							<i class="fas fa-bars"></i>
						</button>
						<form class="d-none d-sm-inline-block mw-100 ms-md-3 me-auto my-2 my-md-0 navbar-search">
							<div class="input-group">
								<input class="bg-light form-control border-0 small" type="text" placeholder="Search for ...">
								<button class="btn btn-primary py-0" type="button">
									<i class="fas fa-search"></i>
								</button>
							</div>
						</form>
						<ul class="navbar-nav flex-nowrap ms-auto">
							<li class="nav-item dropdown d-sm-none no-arrow">
								<a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">
									<i class="fas fa-search"></i>
								</a>
								<div class="dropdown-menu p-3 dropdown-menu-end animated--grow-in" aria-labelledby="searchDropdown">
									<form class="w-100 me-auto navbar-search">
										<div class="input-group">
											<input class="bg-light border-0 form-control small" type="text" placeholder="Search for ...">
											<button class="btn btn-primary" type="button">
												<i class="fas fa-search"></i>
											</button>
										</div>
									</form>
								</div>
							</li>
							<li class="nav-item mx-1 dropdown no-arrow">
								<div class="nav-item dropdown no-arrow">
									<a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">
										<span class="badge bg-danger badge-counter">3+</span><i class="fas fa-bell fa-fw"></i>
									</a>
									<div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
										<h6 class="dropdown-header">alerts center</h6>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3">
												<div class="bg-primary icon-circle">
													<i class="fas fa-file-alt text-white"></i>
												</div>
											</div>
											<div>
												<span class="small text-gray-500">December 12, 2025</span>
												<p>A new monthly report is ready to download!</p>
											</div>
										</a>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3">
												<div class="bg-success icon-circle">
													<i class="fas fa-donate text-white"></i>
												</div>
											</div>
											<div>
												<span class="small text-gray-500">December 7, 2025</span>
												<p>250000FRW has been deposited into your account!</p>
											</div>
										</a>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3">
												<div class="bg-warning icon-circle">
													<i class="fas fa-exclamation-triangle text-white"></i>
												</div>
											</div>
											<div>
												<span class="small text-gray-500">December 2, 2025</span>
												<p>Spending Alert: We've noticed unusually high spending for your account.</p>
											</div>
										</a>
										<a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
									</div>
								</div>
							</li>
							<li class="nav-item mx-1 dropdown no-arrow">
								<div class="nav-item dropdown no-arrow">
									<a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">
										<span class="badge bg-danger badge-counter">7</span><i class="fas fa-envelope fa-fw"></i>
									</a>
									<div class="dropdown-menu dropdown-menu-end dropdown-list animated--grow-in">
										<h6 class="dropdown-header">alerts center</h6>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3 dropdown-list-image">
												<img class="rounded-circle" src="assets/img/avatars/avatar4.jpeg">
												<div class="bg-success status-indicator"></div>
											</div>
											<div class="fw-bold">
												<div class="text-truncate">
													<span>Hi there! I am wondering if you can help me with a problem I've been having.</span>
												</div>
												<p class="mb-0 small text-gray-500">Emily Fowler - 58m</p>
											</div>
										</a>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3 dropdown-list-image">
												<img class="rounded-circle" src="assets/img/avatars/avatar2.jpeg">
												<div class="status-indicator"></div>
											</div>
											<div class="fw-bold">
												<div class="text-truncate">
													<span>I have the photos that you ordered last month!</span>
												</div>
												<p class="mb-0 small text-gray-500">Uwineza Jane - 1d</p>
											</div>
										</a>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3 dropdown-list-image">
												<img class="rounded-circle" src="assets/img/avatars/avatar3.jpeg">
												<div class="bg-warning status-indicator"></div>
											</div>
											<div class="fw-bold">
												<div class="text-truncate">
													<span>Last month's report looks great, I am very happy with the progress so far, keep up the good work!</span>
												</div>
												<p class="mb-0 small text-gray-500">NZABONIMANA Danniel - 2d</p>
											</div>
										</a>
										<a class="dropdown-item d-flex align-items-center" href="#">
											<div class="me-3 dropdown-list-image">
												<img class="rounded-circle" src="assets/img/avatars/avatar5.jpeg">
												<div class="bg-success status-indicator"></div>
											</div>
											<div class="fw-bold">
												<div class="text-truncate">
													<span>Am I a good boy? The reason I ask is because someone told me that people say this to all Recipes, even if they are good...</span>
												</div>
												<p class="mb-0 small text-gray-500">Chicken Legs · 2w</p>
											</div>
										</a>
										<a class="dropdown-item text-center small text-gray-500" href="#">Show All Alerts</a>
									</div>
								</div>
								<div class="shadow dropdown-list dropdown-menu dropdown-menu-end" aria-labelledby="alertsDropdown"></div>
							</li>
							<div class="d-none d-sm-block topbar-divider"></div>
							<li class="nav-item dropdown no-arrow">
								<div class="nav-item dropdown no-arrow">
									<a class="dropdown-toggle nav-link" aria-expanded="false" data-bs-toggle="dropdown" href="#">
										<span class="d-none d-lg-inline me-2 text-gray-600 small">MBABAZI Joseph</span>
										<img class="border rounded-circle img-profile" src="assets/img/avatars/avatar1.jpeg">
									</a>
									<div class="dropdown-menu shadow dropdown-menu-end animated--grow-in">
										<a class="dropdown-item" href="#">
											<i class="fas fa-user me-2 fa-sm fa-fw text-gray-400"></i>&nbsp;Profile
										</a>
										<a class="dropdown-item" href="#">
											<i class="fas fa-cogs me-2 fa-sm fa-fw text-gray-400"></i>&nbsp;Settings
										</a>
										<a class="dropdown-item" href="#">
											<i class="fas fa-list me-2 fa-sm fa-fw text-gray-400"></i>&nbsp;Activity log
										</a>
										<div class="dropdown-divider"></div>
										<a class="dropdown-item" href="#">
											<i class="fas fa-sign-out-alt me-2 fa-sm fa-fw text-gray-400"></i>&nbsp;Logout
										</a>
									</div>
								</div>
							</li>
						</ul>
					</div>
				</nav>

				<div class="container-fluid">
					<!-- Page header: use utility classes instead of inline styles -->
					<h3 class="text-dark mb-2 d-flex align-items-center justify-content-between">
						<div>
							<span class="h4 d-block">IRIZA RESTAURANT</span>
							<small class="text-muted">Collaborator Profile & Restaurant Dashboard</small>
							<div class="mt-2 small text-muted">
								<span class="me-3"><i class="fas fa-map-marker-alt"></i>&nbsp;Kigali, Rwanda</span>
								<span class="me-3"><i class="fas fa-star text-warning"></i>&nbsp;4.7 (1.2k reviews)</span>
								<span class="me-3"><i class="fas fa-clock"></i>&nbsp;<strong id="rest-status">Open</strong></span>
							</div>
						</div>
						<div class="header-actions">
							<a class="btn btn-outline-secondary btn-sm" href="analytics.html" id="manage-overview">Overview</a>
							<a class="btn btn-primary btn-sm" href="Orders.html" id="see-orders">See Orders</a>
						</div>
					</h3>

					<div class="row mb-3">
						<div class="col-lg-4">
							<div class="card mb-3">
								<div class="card-body text-center shadow">
									<img class="rounded-circle mt-4 mb-3" src="assets/img/avatar2.jpeg" width="160" height="160" alt="profile">
									<h5 class="mb-0">MBABAZI Joseph</h5>
									<div class="text-muted small">Manager • IRIZA RESTAURANT</div>
									<div class="mt-3">
										<p class="mb-1"><i class="fas fa-envelope"></i>&nbsp;<a href="mailto:joe@example.com">restaurant@iriza.online</a></p>
										<p class="mb-1"><i class="fas fa-phone"></i>&nbsp;+250 78 000 0000</p>
									</div>
									<div class="mt-3 d-flex justify-content-center gap-2">
										<button class="btn btn-sm btn-outline-primary" id="edit-profile">Edit Profile</button>
										<button class="btn btn-sm btn-success" id="open-add-collab" data-bs-toggle="modal" data-bs-target="#addCollaboratorModal">Add Collaborator</button>
										<button class="btn btn-sm btn-secondary" id="toggle-collab-list">View Collaborators</button>
									</div>
								</div>
							</div>

							<div class="card shadow mb-4">
								<div class="card-header py-3">
									<h6 class="text-primary m-0 fw-bold">Restaurant Tools</h6>
								</div>
								<div class="card-body">
									<div class="d-grid gap-2">
										<a href="Orders.html" class="tool-card">
											<div class="icon bg-primary text-white"><i class="fas fa-receipt"></i></div>
											<div>
												<div class="fw-bold">Orders</div>
												<small class="text-muted">Manage active & completed orders</small>
											</div>
										</a>
										<a href="menu.html" class="tool-card">
											<div class="icon bg-warning text-white"><i class="fas fa-utensils"></i></div>
											<div>
												<div class="fw-bold">Menu</div>
												<small class="text-muted">Edit dishes, prices & availability</small>
											</div>
										</a>
										<a href="reservations.html" class="tool-card">
											<div class="icon bg-success text-white"><i class="fas fa-calendar-check"></i></div>
											<div>
												<div class="fw-bold">Reservations</div>
												<small class="text-muted">View & manage bookings</small>
											</div>
										</a>
										<a href="inventory.html" class="tool-card">
											<div class="icon bg-info text-white"><i class="fas fa-boxes"></i></div>
											<div>
												<div class="fw-bold">Inventory</div>
												<small class="text-muted">Track stock & suppliers</small>
											</div>
										</a>
										<a href="staff.html" class="tool-card">
											<div class="icon bg-secondary text-white"><i class="fas fa-users"></i></div>
											<div>
												<div class="fw-bold">Staff</div>
												<small class="text-muted">Manage collaborators & shifts</small>
											</div>
										</a>
										<a href="analytics.html" class="tool-card">
											<div class="icon bg-dark text-white"><i class="fas fa-chart-line"></i></div>
											<div>
												<div class="fw-bold">Analytics</div>
												<small class="text-muted">Sales & performance insights</small>
											</div>
										</a>
									</div>
								</div>
							</div>
						</div>
						<div class="col-lg-8">
							<div class="row mb-3 d-none">
								<div class="col">
									<div class="card text-white bg-primary shadow">
										<div class="card-body">
											<div class="row mb-2">
												<div class="col">
													<p class="m-0">Peformance</p>
													<p class="m-0"><strong>65.2%</strong></p>
												</div>
												<div class="col-auto">
													<i class="fas fa-rocket fa-2x"></i>
												</div>
											</div>
											<p class="text-white-50 m-0 small">
												<i class="fas fa-arrow-up"></i>&nbsp;5% since last month
											</p>
										</div>
									</div>
								</div>
								<div class="col">
									<div class="card text-white bg-success shadow">
										<div class="card-body">
											<div class="row mb-2">
												<div class="col">
													<p class="m-0">Peformance</p>
													<p class="m-0"><strong>65.2%</strong></p>
												</div>
												<div class="col-auto">
													<i class="fas fa-rocket fa-2x"></i>
												</div>
											</div>
											<p class="text-white-50 m-0 small">
												<i class="fas fa-arrow-up"></i>&nbsp;5% since last month
											</p>
										</div>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col">
									<div class="card shadow mb-3">
										<div class="card-header py-3">
											<p class="text-primary m-0 fw-bold">User Settings</p>
										<div class="container-fluid">
					<h3 class="text-dark mb-4">#IRIZA GRILL 02015</h3>
					<div class="card shadow">
						<div class="card-header py-3 d-flex align-items-center justify-content-between">
							<p class="text-primary m-0 fw-bold">ALL ORDERS</p>
							<button id="add-order-btn" class="btn btn-sm btn-success">+ Add Order</button>
						</div>
						<div class="card-body">
							<div class="row">
								<div class="col-md-6 text-nowrap">
									<div id="ordersTable_length" class="dataTables_length" aria-controls="ordersTable">
										<label class="form-label">Show&nbsp;<select class="d-inline-block form-select form-select-sm">
											<option value="10" selected="">10</option>
											<option value="25">25</option>
											<option value="50">50</option>
											<option value="100">100</option>
										</select>&nbsp;</label>
									</div>
								</div>
								<div class="col-md-6">
									<div class="text-md-end dataTables_filter" id="ordersTable_filter">
										<label class="form-label"><input type="search" class="form-control form-control-sm"
												aria-controls="ordersTable" placeholder="Search"></label>
									</div>
								</div>
							</div>
							<div class="table-responsive mt-2 table" id="dataTableWrapper" role="grid" aria-describedby="dataTable_info">
								<table class="table my-0" id="ordersTable">
									<thead>
										<tr>
											<th>Name</th>
											<th>Product/ID</th>
											<th>Location</th>
											<th>Number</th>
											<th>Email</th>
											<th>Quantity</th>
											<th>Amount</th>
											<th>Total</th>
											<th>Status</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody id="orders-tbody"></tbody>
									<tfoot>
										<tr>
											<td><strong>Name</strong></td>
											<td><strong>Product</strong></td>
											<td><strong>Location</strong></td>
											<td><strong>Number</strong></td>
											<td><strong>Email</strong></td>
											<td><strong>Quantity</strong></td>
											<td><strong>Amount</strong></td>
											<td><strong>TOTAL</strong></td>
											<td><strong>Status</strong></td>
											<td><strong>Actions</strong></td>
										</tr>
									</tfoot>
								</table>
							</div>
									</div>
									<div class="card shadow">
										<div class="card-header py-3">
											<p class="text-primary m-0 fw-bold">MENU SETTING</p>
										</div>
										<div class="container-fluid">
		<div class="d-flex align-items-center justify-content-between mb-3">
			<div>
				<h3 class="mb-0">Menu Management</h3>
			</div>
			<div>
				<button class="btn btn-success" id="add-dish-btn" data-bs-toggle="modal" data-bs-target="#dishModal"><i class="fas fa-plus"></i> Add Dish</button>
				<a class="btn btn-outline-secondary" href="menu.html" id="refresh-menu">Refresh</a>
			</div>
		</div>

		<div class="row mb-3">
			<div class="col-md-4">
				<div class="card card-summary shadow-sm p-3">
					<div class="h6">Total Dishes</div>
					<div class="display-6" id="menu-count">0</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card card-summary shadow-sm p-3">
					<div class="h6">Available</div>
					<div class="display-6 text-success" id="available-count">0</div>
				</div>
			</div>
			<div class="col-md-4">
				<div class="card card-summary shadow-sm p-3">
					<div class="h6">Avg Price</div>
					<div class="display-6" id="avg-price">0</div>
				</div>
			</div>
		</div>

		<div class="card shadow mb-5">
			<div class="card-header d-flex align-items-center justify-content-between">
				<strong>Menu</strong>
				<small class="text-muted">Manage menu items</small>
			</div>
			<div class="card-body">
				<div class="table-responsive">
					<table class="table table-hover" id="menu-table">
						<thead class="table-light">
							<tr>
								<th>Dish</th>
								<th>Category</th>
								<th>Price (FRW)</th>
								<th>Availability</th>
								<th class="text-end">Actions</th>
							</tr>
						</thead>
						<tbody id="menu-tbody">
							<!-- items render here -->
						</tbody>
					</table>
				</div>
			</div>
		</div>
	                    </div>
									</div>
								</div>
							</div>
							<div class="card shadow mb-5">
								<div class="card-header py-3">
									<p class="text-primary m-0 fw-bold">INCOME REVENUE</p>
								</div>
								<div class="container-fluid">
		<div class="d-flex align-items-center justify-content-between mb-3">
			<div>
				<h3 class="mb-0">Analytics</h3>
			</div>
			<div>
				<select class="form-select form-select-sm" id="period-select" style="width:150px;">
					<option value="30">Last 30 days</option>
					<option value="90">Last 90 days</option>
					<option value="365">Last year</option>
				</select>
			</div>
		</div>

		<div class="row mb-3">
			<div class="col-md-3">
				<div class="card shadow-sm p-3"><div class="small text-muted">Revenue (30d)</div><div class="h4" id="rev">0 FRW</div></div>
			</div>
			<div class="col-md-3">
				<div class="card shadow-sm p-3"><div class="small text-muted">Orders</div><div class="h4" id="orders-count">0</div></div>
			</div>
			<div class="col-md-3">
				<div class="card shadow-sm p-3"><div class="small text-muted">Avg Order</div><div class="h4" id="avg-order">0 FRW</div></div>
			</div>
			<div class="col-md-3">
				<div class="card shadow-sm p-3"><div class="small text-muted">Top Dish</div><div class="h4" id="top-dish">-</div></div>
			</div>
		</div>

		<div class="card shadow chart-card mb-5">
			<div class="card-body">
				<canvas id="salesChart"></canvas>
			</div>
		</div>
	</div>
							</div>
						</div>
					</div>

					<!-- Add Collaborator Modal -->
					<div class="modal fade" id="addCollaboratorModal" tabindex="-1" aria-labelledby="addCollaboratorModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="addCollaboratorModalLabel">Add Collaborator</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="add-collab-form" onsubmit="return false;">
										<div class="mb-3">
											<label class="form-label">Full name</label>
											<input class="form-control" id="collab-name" required>
										</div>
										<div class="mb-3">
											<label class="form-label">Role</label>
											<input class="form-control" id="collab-role" placeholder="e.g. Chef, Waiter, Manager">
										</div>
										<div class="mb-3">
											<label class="form-label">Email</label>
											<input type="email" class="form-control" id="collab-email">
										</div>
										<div class="text-end">
											<button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
											<button class="btn btn-primary btn-sm" id="save-collab">Add</button>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>

				</div>

				<footer class="bg-white sticky-footer">
					<div class="container my-auto">
						<div class="text-center my-auto copyright"></div>
					</div>
				</footer>
			</div>

			<a class="border rounded d-inline scroll-to-top" href="#page-top"><i class="fas fa-angle-up"></i></a>

			<!-- Scripts: ensure jQuery loads before Bootstrap and plugins -->
			<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
			<script src="assets/bootstrap/js/bootstrap.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/jquery.tablesorter.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/widgets/widget-filter.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.2/js/widgets/widget-storage.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>

			<!-- Project scripts (last so they can hook into DOM and libraries) -->
			<script src="assets/js/script.min.js"></script>

			<!-- add API client -->
<script src="assets/js/api-client.js"></script>
<script>
	(function () {
		// Simple serializer for inputs with data-field
		function serializeForm($form) {
			var obj = {};
			$form.find('[data-field]').each(function () {
				var $el = $(this);
				var key = $el.data('field');
				if ($el.is(':checkbox')) obj[key] = $el.is(':checked');
				else obj[key] = $el.val();
			});
			return obj;
		}

		// Save button handlers (visual feedback + console hook)
		$('[id^="save-"]').on('click', function (e) {
			var action = $(this).data('action');
			var $form = $('#' + action.replace(/^save/, '').toLowerCase() + '-settings-form');
			if (!$form.length) { $form = $(this).closest('form'); }
			var data = serializeForm($form);
			console.log('save action:', action, data);
			var $btn = $(this);
			$btn.prop('disabled', true).text('Saved');
			setTimeout(function () { $btn.prop('disabled', false).text('Save Settings'); }, 1200);
		});

		// prevent enter from submitting forms accidentally
		$('form.editable-section').on('keydown', function (e) {
			if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
				e.preventDefault();
				return false;
			}
		});

		// Collaborators in-memory list
		var collabs = [];

		async function renderCollabs() {
			try{ collabs = await API.collaborators.list(); }catch(e){ console.error(e); collabs = []; }
			var $t = $('#collab-list').empty();
			if (!collabs.length) {
				$t.append('<tr><td colspan="4" class="text-muted small">No collaborators yet</td></tr>');
				return;
			}
			collabs.forEach(function (c) {
				var $row = $('<tr>');
				$row.append('<td>' + c.name + '</td>');
				$row.append('<td>' + c.role + '</td>');
				$row.append('<td>' + (c.email || '-') + '</td>');
				$row.append('<td class="text-end"><button class="btn btn-sm btn-outline-danger remove-collab" data-id="' + c.id + '">Remove</button></td>');
				$t.append($row);
			});
		}

		// initial render
		renderCollabs();

		// toggle collaborator panel
		$('#toggle-collab-list').on('click', function () {
			$('#collaborators-card').toggleClass('d-none');
		});

		// add collaborator from modal
		$('#save-collab').on('click', async function () {
			var name = $('#collab-name').val().trim();
			if (!name) { $('#collab-name').focus(); return; }
			var role = $('#collab-role').val().trim();
			var email = $('#collab-email').val().trim();
			try{
				await API.collaborators.create({ name: name, role: role || 'Collaborator', email: email });
				$('#addCollaboratorModal').modal('hide');
				$('#add-collab-form')[0].reset();
				await renderCollabs();
			}catch(e){ console.error(e); alert('Failed to add'); }
		});

		// remove collaborator
		$(document).on('click', '.remove-collab', async function () {
			var id = $(this).data('id');
			try{ await API.collaborators.delete(id); }catch(e){ console.error(e); }
			await renderCollabs();
		});

		// small demo of toggling restaurant status
		$('#rest-status').on('click', function () {
			var $s = $(this);
			$s.text($s.text() === 'Open' ? 'Closed' : 'Open');
		});
	})();
</script>
<script>
	(function(){
		// render read-only orders and menu from localStorage to keep profile synchronized
		function loadJSON(key, fallback){ try{ const raw = localStorage.getItem(key); return raw ? JSON.parse(raw) : fallback; }catch(e){ return fallback; } }
		function formatCurrency(n){ return new Intl.NumberFormat().format(n) + ' FRW'; }

		function renderProfileOrders(){
			const orders = loadJSON('iriza_orders', []);
			const tbody = $('#orders-tbody').empty();
			if(!orders.length){
				tbody.append('<tr><td colspan="10" class="text-muted small">No orders yet</td></tr>');
				return;
			}
			orders.forEach(o=>{
				const total = (o.qty||0)*(o.amount||0);
				tbody.append('<tr>'
					+ '<td>' + (o.name||'-') + '</td>'
					+ '<td>' + (o.product||'-') + '</td>'
					+ '<td>' + (o.location||'-') + '</td>'
					+ '<td>' + (o.number||'-') + '</td>'
					+ '<td>' + (o.email||'-') + '</td>'
					+ '<td>' + (o.qty||0) + '</td>'
					+ '<td>' + formatCurrency(o.amount||0) + '</td>'
					+ '<td>' + formatCurrency(total) + '</td>'
					+ '<td>' + (o.status||'Pending') + '</td>'
					+ '<td class="text-end"><button class="btn btn-sm btn-outline-primary">View</button></td>'
					+ '</tr>');
			});
		}

		function renderProfileMenu(){
			const menu = loadJSON('iriza_menu', []);
			const tbody = $('#menu-tbody').empty();
			if(!menu.length) { tbody.append('<tr><td colspan="5" class="text-muted small">No menu items yet</td></tr>'); return; }
			menu.forEach(d=>{
				const avail = d.available ? '<span class="badge bg-success">Available</span>' : '<span class="badge bg-secondary">Unavailable</span>';
				const delivery = d.deliverable ? ('<div class="small text-success">Delivery: ' + (Number(d.deliveryFee||0)).toLocaleString() + ' FRW</div>') : '<div class="small text-muted">No delivery</div>';
				tbody.append('<tr>'
					+ '<td><strong>' + (d.name||'-') + '</strong><div class="small text-muted">' + (d.desc||'') + '</div>' + delivery + '</td>'
					+ '<td>' + (d.category||'-') + '</td>'
					+ '<td>' + Number(d.price||0).toLocaleString() + '</td>'
					+ '<td>' + avail + '</td>'
					+ '<td class="text-end"><button class="btn btn-sm btn-outline-primary">Edit</button></td>'
					+ '</tr>');
			});
			$('#menu-count').text(menu.length);
			$('#available-count').text(menu.filter(m=>m.available).length);
			const avg = menu.length ? Math.round(menu.reduce((s,x)=> s + Number(x.price||0), 0) / menu.length) : 0;
			$('#avg-price').text(avg.toLocaleString() + ' FRW');
		}

		// initial render and also refresh on modal saves (collaboration with menu page)
		$(document).ready(function(){
			renderProfileOrders();
			renderProfileMenu();

			// listen for storage changes (other windows/pages)
			window.addEventListener('storage', function(e){
				if(e.key === 'iriza_orders') renderProfileOrders();
				if(e.key === 'iriza_menu') renderProfileMenu();
			});
		});
	})();
</script>
		</div>
	</div>
</body>

</html>
